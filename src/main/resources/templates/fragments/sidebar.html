<div th:fragment="sidebar">
    <div class="sidebar">
        <h2>Menu</h2>

        <p th:text="${user != null ? 'User is logged in' : 'No user logged in'}"></p>
        <p th:text="${session.tab != null ? session.tab : 'Tab is not set'}"></p>


        <div th:if="${user != null}">
            <!-- Cleaner Links -->
            <div th:if="${user.profileCode == 'cleaner'}">
                <a href="/dashboard" th:classappend="${activePage == 'dashboard'} ? 'active'">Dashboard</a>
                <a href="/cleaner/createListing" th:classappend="${activePage == 'createListing'} ? 'active'">Create Listing</a>
                <a href="/cleaner/viewListings" th:classappend="${activePage == 'viewListings'} ? 'active'">Manage Listings</a>
            </div>

            <!-- Admin Links -->
            <div th:if="${user.profileCode == 'admin'}">
                <!-- User Accounts -->
                <div th:if="${session.tab == 'accounts'}">
                    <a href="/dashboard" th:classappend="${activePage == 'dashboard'} ? 'active'">Dashboard</a>
                    <a href="/admin/createUser" th:classappend="${activePage == 'createUser'} ? 'active'">Create User</a>
                    <a href="/admin/viewUserAccounts" th:classappend="${activePage == 'viewUsers'} ? 'active'">Manage Users</a>
                </div>

                <!-- User Profiles -->
                <div th:if="${session.tab == 'profiles'}">
                    <a href="/dashboard" th:classappend="${activePage == 'dashboard'} ? 'active'">Dashboard</a>
                    <a href="/admin/createProfile" th:classappend="${activePage == 'createProfile'} ? 'active'">Create Profile</a>
                    <a href="/admin/viewProfiles" th:classappend="${activePage == 'viewProfiles'} ? 'active'">Manage Profiles</a>
                </div>
            </div>

            <!-- Homeowner Links -->
            <div th:if="${user.profileCode == 'homeowner'}">
                <a href="/dashboard" th:classappend="${activePage == 'dashboard'} ? 'active'">Dashboard</a>
                <a href="/homeowner/findCleaners" th:classappend="${activePage == 'findCleaners'} ? 'active'">Find Cleaners</a>
                <a href="/homeowner/bookings" th:classappend="${activePage == 'bookings'} ? 'active'">My Bookings</a>
            </div>
        </div>
    </div>
</div>
